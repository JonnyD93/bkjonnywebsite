<div class="container">
  <div class="row">
    <div style="padding-top: 32px;">
      <div class="col s2" style="z-index: 10" *ngFor="let entity of enemyDisplays.entities; let i = index">
        <div class="btn vampire" [ngClass]="{death: entity.death}"
             [style.background-color]="calcColor(entity,enemyDisplays.healths[i])" (click)="attack($event,entity)">
          {{entity.name}}
        </div>
        <div *ngIf="!entity.death"><div class="entity-effect" *ngFor="let effect of enemyDisplays.entities[i].activeEffects; let j = index"
                        [style.background-color]="effect.color" [style.z-index]="-1-j" [style.bottom]="36-j+'px'"></div></div>
      </div>
    </div>
  </div>
  <div class="row" style="z-index: 10">
    <div *ngFor="let keys of characterDisplays.keys; let i = index" [id]="characterDisplays.characters[i].name + 'id'">
      <div class="card character-stat col s2">
        <div *ngFor="let item of keys">
          <div class="card-title" *ngIf="item =='name'">{{characterDisplays.characters[i][item]}}<i
            class="material-icons downArrow" (click)="attack($event,this.characterDisplays.characters[i])">my_location</i></div>
          <div class="stats">
            <div
              *ngIf="item != 'side'&& item != 'name' && item != 'abilities' && item !='activeEffects' && item !='inventory'">
              {{item.charAt(0).toUpperCase() + item.slice(1) + ": "+ characterDisplays.characters[i][item]}}
            </div>
          </div>
          <div *ngIf="item == 'activeEffects'">
            <div class="effect" *ngFor="let effect of characterDisplays.characters[i].activeEffects; let j = index"
                 [style.background-color]="effect.color" [style.z-index]="-1-j" [style.left]="(j*10)-5+'px'"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div *ngFor="let character of characterDisplays.characters; let i = index">
  <nav class="abilities-ui" *ngIf="checkPlayerActive(character)">
    <span><div class="btn skip-turn-btn" (click)="skipTurn(false)"><i
      class="material-icons skip-turn-icon">access_time</i></div></span>
    <span><div class="btn skip-turn-btn" style="top: 32px;"><i class="material-icons skip-turn-icon">backspace</i></div></span>
    <span class="player-ui">{{character.name}}</span>
    <span *ngFor="let ability of character.abilities; let j = index">
      <label>
      <input class="with-gap" name="abilities" type="radio" [checked]="checkLastActiveAbility(ability)"/>
      <div class="btn" *ngIf="ability.currentCooldown <= 0">{{ability.name}}
        <div class='itemName'
             *ngIf="checkItemAbility(character,ability)!=''">{{checkItemAbility(character,ability)}}</div>
      </div>
      </label>
      <div *ngIf="ability.currentCooldown>0" class="btn ability-disabled-ui disabled">{{ability.name}}
        <div class='itemName' *ngIf="checkItemAbility(character,ability)!=''">{{checkItemAbility(character,ability)}}
        </div>
        <span class="ability-disabled-ui-cooldown"> {{ability.currentCooldown}}</span>
      </div>
    </span>
    <div class="progress">
      <div class="determinate" [style.width]="(healthCalculation(character.health,characterDisplays.healths[i]))+'%'"></div>
    </div>
  </nav>
</div>
<div *ngFor="let character of enemyDisplays.entities; let i = index">
  <nav class="entity-ui"  *ngIf="checkPlayerActive(character)">
    <span class="entity-name">{{character.name}}</span>
    <div class="progress">
      <div class="determinate" [style.width]="(healthCalculation(character.health,enemyDisplays.healths[i]))+'%'"></div>
    </div>
  </nav>
</div>
<span class="status" *ngFor="let hit of hits" [ngStyle]="hit.styles">{{hit.statusText}}</span>
